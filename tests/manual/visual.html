<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, user-scalable=no">
    <title></title>
    <style>

        * {
            box-sizing: border-box;
            -moz-box-sizing: border-box;
        }

        html, body {
            background: #000;
            -ms-touch-action: none; /* window phone needs this for the demo, unfortunately */
            font: 14px sans-serif;
        }

        .animate {
            -webkit-transition: all .3s;
            -moz-transition: all .3s;
            transition: all .3s;
        }

        #hit {
            padding: 10px;
            -ms-touch-select: none; /* Windows Phone grippers are always off. */
            -webkit-touch-callout: none;
            -webkit-tap-highlight-color: 'rgba(0,0,0,0)';
        }

    </style>
</head>
<body>

    <div id="hit" style="background: red; width: 150px; height: 150px;"></div>


    <script src="../../hammer.js"></script>
    <script>

        var transform;
        var el = document.querySelector("#hit");
        var mc = new Hammer.Instance(el, {
            touchAction: 'none'
        });

        Hammer.prefixed('transformOrigin', el.style, "50% 50%");


        mc.addRecognizer(new Hammer.PanRecognizer({ threshold: 0 }));

        mc.addRecognizer(new Hammer.RecognizerSet([
            new Hammer.RotationRecognizer({ threshold: 0 }),
            new Hammer.PinchRecognizer({ threshold: 0 })]));

        mc.addRecognizer(new Hammer.TapRecognizer());
        mc.addRecognizer(new Hammer.TapRecognizer({ event: 'doubletap', taps: 2 }));

        el.addEventListener("pan", onPan, false);
        el.addEventListener("rotate", onRotate, false);
        el.addEventListener("pinch", onPinch, false);

        el.addEventListener("tap", onTap, false);
        el.addEventListener("doubletap", onDoubleTap, false);

        el.addEventListener("panend", resetElement, false);
        el.addEventListener("rotateend", resetElement, false);
        el.addEventListener("pinchend", resetElement, false);


        function resetElement() {
            transform = {
                translate: { x: 100, y: 100 },
                scale: 1,
                rotate: 0
            };
            el.className = 'animate';
            updateElementTransform();
        }

        function updateElementTransform() {
            var value = [
                'translate('+ transform.translate.x +'px, '+ transform.translate.y +'px)',
                'scale('+ transform.scale +', '+ transform.scale +')',
                'rotate('+ transform.rotate +'deg)'];

            el.textContent = value.join(" ");

            Hammer.prefixed('transform', el.style, value.join(" "));
        }

        function onPan(ev) {
            el.className = '';
            transform.translate = {
                x: 100 + ev.gesture.deltaX,
                y: 100 + ev.gesture.deltaY
            };
            updateElementTransform();
        }

        function onPinch(ev) {
            el.className = '';
            transform.scale = ev.gesture.scale;
            updateElementTransform();
        }
        function onRotate(ev) {
            el.className = '';
            transform.rotate = ev.gesture.rotation;
            updateElementTransform();
        }

        function onTap(ev) {
            el.style.background = el.style.background == 'yellow' ? 'red' : 'yellow';
        }

        function onDoubleTap(ev) {
            transform.scale = transform.scale != 1 ? 1 : 2;
            updateElementTransform();
        }

        resetElement();

    </script>
</body>
</html>
