/*! Hammer.JS - v1.0.0dev - 2013-01-25
 * http://eightmedia.github.com/hammer.js
 *
 * Copyright (c) 2013 Jorik Tangelder <jorik@eight.nl>;
 * Licensed under the MIT license */

(function(e){"use strict";function t(){if(!n.READY){for(var t in n.gestures)n.gestures.hasOwnProperty(t)&&n.gesture.registerGesture(n.gestures[t]);n.event.onTouch(e,n.TOUCH_MOVE,n.gesture.detect),n.event.onTouch(e,n.TOUCH_END,n.gesture.endDetect),n.READY=!0}}var n=function(e,t){return new n.Instance(e,t||{})};n.defaults={},n.HAS_TOUCHEVENTS="ontouchstart"in e,n.DIRECTION_DOWN="down",n.DIRECTION_LEFT="left",n.DIRECTION_UP="up",n.DIRECTION_RIGHT="right",n.TOUCH_START="start",n.TOUCH_MOVE="move",n.TOUCH_END="end",n.READY=!1,n.Instance=function(e,r){var i=this;return this.element=e,this.options=n.util.extend(n.defaults,r||{}),t(),n.event.onTouch(e,n.TOUCH_START,function(e){n.gesture.startDetect(i,e)}),this},n.Instance.prototype={trigger:function(e,t){return t.gesture=e,n.event.trigger(this.element,e,t)},on:function(e,t){return n.event.on(this.element,e,t)},off:function(e,t){return n.event.off(this.element,e,t)}},n.event={on:function(e,t,n){t=t.split(" ");for(var r=0;t.length>r;r++)e.addEventListener(t[r],n,!1)},off:function(e,t,n){t=t.split(" ");for(var r=0;t.length>r;r++)e.removeEventListener(t[r],n,!1)},trigger:function(e,t,n){var r=document.createEvent("Event");r.initEvent(t,!0,!0),r.hammer=n,e.dispatchEvent(r)},_last_move_event:{},_first_mouse_pos:{},onTouch:function(e,t,r){var i=function(i){t===n.TOUCH_END?i=n.event._last_move_event:n.event._last_move_event=i,r.call(this,n.event.collectEventData(e,t,i))},a={};a[n.TOUCH_START]=n.HAS_TOUCHEVENTS?"touchstart gesturestart gesturechange":"mousedown",a[n.TOUCH_MOVE]=n.HAS_TOUCHEVENTS?"touchmove":"mousemove",a[n.TOUCH_END]=n.HAS_TOUCHEVENTS?"touchend touchcancel gestureend":"mouseup",n.HAS_TOUCHEVENTS?n.event.on(e,a[t],i):n.event.on(e,a[t],function(e){1===e.which&&i.apply(this,arguments)})},createFakeTouchList:function(e,t){var n=[{identifier:1,clientX:t.clientX,clientY:t.clientY,pageX:t.pageX,pageY:t.pageY,target:t.target}];return n},collectEventData:function(e,t,r){var i=r.touches;return i||(i=n.event.createFakeTouchList(t,r)),{type:t,time:Date.now(),target:r.target,touches:i,touchEvent:r,center:n.util.getCenter(i)}}},n.util={extend:function(e,t,r){r=r||0;for(var i in t)t.hasOwnProperty(i)&&(e[i]=r&&"object"==typeof t[i]?n.util.extend({},t[i],r-1):t[i]);return e},getCenter:function(e){var t={pageX:0,pageY:0,clientX:0,clientY:0},n={};for(var r in t){n[r]={min:1/0,max:-1/0};for(var i=0,a=e.length;a>i;i++)n[r].min=Math.min(e[i][r],n[r].min),n[r].max=Math.max(e[i][r],n[r].max);t[r]=Math.round((n[r].min+n[r].max)/2)}return t},getSimpleDistance:function(e,t){return Math.abs(t-e)},getAngle:function(e,t){var n=t.pageY-e.pageY,r=t.pageX-e.pageX;return 180*Math.atan2(n,r)/Math.PI},getDirection:function(e,t){var r=Math.abs(e.pageX-t.pageX),i=Math.abs(e.pageY-t.pageY);return r>=i?e.pageX-t.pageX>0?n.DIRECTION_LEFT:n.DIRECTION_RIGHT:e.pageY-t.pageY>0?n.DIRECTION_UP:n.DIRECTION_DOWN},getDistance:function(e,t){var n=t.pageX-e.pageX,r=t.pageY-e.pageY;return Math.sqrt(n*n+r*r)},getScale:function(e,t){return 2==e.length&&2==t.length?n.util.getDistance(t[0],t[1])/n.util.getDistance(e[0],e[1]):1},getRotation:function(e,t){return 2==e.length&&2==t.length?n.util.getAngle(t[1],t[0])-n.util.getAngle(e[1],e[0]):0}},n.gesture={handlers:[],current:null,previous:null,startDetect:function(e,t){n.gesture.current||(n.gesture.current={inst:e,startEvent:n.util.extend({},t),lastEvent:!1,name:!1},n.gesture.detect(t))},detect:function(e){if(n.gesture.current){for(var t=n.gesture.extendEventData(e),r=0,i=n.gesture.handlers.length;i>r;r++){var a=n.gesture.handlers[r](t.type,t,n.gesture.current.inst);if(a===!1){n.gesture.stop();break}}n.gesture.current.lastEvent=t}},endDetect:function(e){n.gesture.detect(e),n.gesture.stop()},stop:function(){n.gesture.previous=n.util.extend({},n.gesture.current),n.gesture.current=null},extendEventData:function(e){var t=n.gesture.current.startEvent;return t&&e.touches.length!=t.touches.length&&(t.touches=n.util.extend({},e.touches,1)),n.util.extend(e,{touchTime:e.time-t.time,angle:n.util.getAngle(t.center,e.center),direction:n.util.getDirection(t.center,e.center),distance:n.util.getDistance(t.center,e.center),distanceX:n.util.getSimpleDistance(t.center.pageX,e.center.pageX),distanceY:n.util.getSimpleDistance(t.center.pageY,e.center.pageY),scale:n.util.getScale(t.touches,e.touches),rotation:n.util.getRotation(t.touches,e.touches),start:t}),e},registerGesture:function(e){n.util.extend(n.defaults,e.defaults||{}),e.priority=e.priority||1e3,n.gesture.handlers.push(e.handle),n.gesture.handlers.sort(function(e,t){return e.priority<t.priority?-1:e.priority>t.priority?1:0})}},n.gestures={},n.gestures.Hold={priority:10,defaults:{hold_timeout:500},timer:null,handle:function(e,t,r){switch(e){case n.TOUCH_START:clearTimeout(n.gestures.Hold.timer),n.gesture.current.name="hold",n.gestures.Hold.timer=setTimeout(function(){"hold"==n.gesture.current.name&&r.trigger("hold",t)},r.options.hold_timeout);break;case n.TOUCH_MOVE:case n.TOUCH_END:clearTimeout(n.gestures.Hold.timer)}}},n.gestures.Tap={priority:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,doubletap_distance:20,doubletap_interval:300},handle:function(e,t,r){if(e==n.TOUCH_END){var i=n.gesture.previous;if(t.touchTime>r.options.tap_max_touchtime||t.distance>r.options.tap_max_distance)return;n.gesture.current.name=i&&"tap"==i.name&&t.time-i.lastEvent.time<r.options.doubletap_interval&&t.distance<r.options.doubletap_distance?"doubletap":"tap",r.trigger(n.gesture.current.name,t)}}},n.gestures.Drag={priority:50,defaults:{drag_min_distance:10},handle:function(e,t,r){var i="drag";switch(e){case n.TOUCH_MOVE:if(t.distance<r.options.drag_min_distance&&n.gesture.current.name!=i)return;n.gesture.current.name!=i&&r.trigger("dragstart",t),n.gesture.current.name=i,r.trigger(i,t),r.trigger(i+t.direction,t);break;case n.TOUCH_END:n.gesture.current.name==i&&r.trigger("dragend",t)}}},n.gestures.Swipe={priority:51,defaults:{swipe_min_time:150,swipe_min_distance:20},handle:function(e,t,r){var i="swipe";e==n.TOUCH_END&&"drag"==n.gesture.current.name&&t.touchTime>r.options.swipe_min_time&&t.distance>r.options.swipe_min_distance&&(r.trigger(i,t),r.trigger(i+t.direction,t))}},n.gestures.Transform={priority:45,defaults:{transform_min_scale:.1,transform_min_rotation:15},handle:function(e,t,r){var i="transform";switch(e){case n.TOUCH_MOVE:var a=Math.abs(1-t.scale),s=Math.abs(t.rotation);if(r.options.transform_min_scale>a&&r.options.transform_min_rotation>s)return;n.gesture.current.name!=i&&r.trigger("transformstart",t),n.gesture.current.name=i,r.trigger(i,t),s>r.options.transform_min_rotation&&(r.trigger("rotate",t),r.trigger("rotate"+t.direction,t)),a>r.options.transform_min_scale&&(r.trigger("pinch",t),r.trigger("pinch"+(1>t.scale?"in":"out"),t));break;case n.TOUCH_END:n.gesture.current.name==i&&r.trigger("transformend",t)}}},n.gestures.Touch={priority:-1/0,handle:function(e,t,r){e==n.TOUCH_START&&r.trigger("touch",t)}},n.gestures.Release={priority:1/0,handle:function(e,t,r){e==n.TOUCH_END&&r.trigger("release",t)}},e.Hammer=n})(window);