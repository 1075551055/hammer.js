window.Hammer=function(t){"use strict";function t(t,e){return new r(t,e||{})}function e(){t.READY||(n.onTouch(window,t.TOUCH_MOVE,a.detect),n.onTouch(window,t.TOUCH_END,a.endDetect),t.READY=!0)}function r(r,o){var s=this;this.element=r,this.options=i.extend(t.defaults,o),e(),n.onTouch(r,t.TOUCH_START,function(t){a.startDetect(s,t)})}t.defaults={},t.HAS_TOUCHEVENTS="ontouchstart"in window,t.DIRECTION_DOWN="down",t.DIRECTION_LEFT="left",t.DIRECTION_UP="up",t.DIRECTION_RIGHT="right",t.TOUCH_START="start",t.TOUCH_MOVE="move",t.TOUCH_END="end",t.READY=!1,r.prototype.trigger=function(t,e){return e.gesture=t,n.trigger(this.element,t,e)},r.prototype.on=function(t,e){return n.on(this.element,t,e)},r.prototype.off=function(t,e){return n.off(this.element,t,e)};var n=t.Event={on:function(t,e,r){e=e.split(" ");for(var n=0;e.length>n;n++)t.addEventListener(e[n],r,!1)},off:function(t,e,r){e=e.split(" ");for(var n=0;e.length>n;n++)t.removeEventListener(e[n],r,!1)},trigger:function(t,e,r){var n=document.createEvent("Event");n.initEvent(e,!0,!0),n.hammer=r,t.dispatchEvent(n)},onTouch:function(e,r,i){var a=function(t){i.call(this,n.collectEventData(e,r,t))},o={};o[t.TOUCH_START]=t.HAS_TOUCHEVENTS?"touchstart":"mousedown",o[t.TOUCH_MOVE]=t.HAS_TOUCHEVENTS?"touchmove":"mousemove",o[t.TOUCH_END]=t.HAS_TOUCHEVENTS?"touchend touchcancel":"mouseup",t.HAS_TOUCHEVENTS?n.on(e,o[r],a):n.on(e,o[r],function(t){1===t.which&&a.apply(this,arguments)})},collectEventData:function(t,e,r){var n=r.touches;return n||(n=[{identifier:1,clientX:r.clientX,clientY:r.clientY,pageX:r.pageX,pageY:r.pageY,target:r.target}]),{type:e,time:Date.now(),target:r.target,touches:n,originalEvent:r,center:i.getCenter(n)}}},i=t.Util={extend:function(t,e){for(var r in e)t[r]=e[r];return t},getCenter:function(t){return t[0]},getSimpleDistance:function(t,e){return Math.abs(e-t)},getAngle:function(t,e){var r=e.pageY-t.pageY,n=e.pageX-t.pageX;return 180*Math.atan2(r,n)/Math.PI},getDistance:function(t,e){var r=e.pageX-t.pageX,n=e.pageY-t.pageY;return Math.sqrt(r*r+n*n)},getDirection:function(e){var r={DIRECTION_DOWN:e>=45&&135>e,DIRECTION_LEFT:e>=135||-135>=e,DIRECTION_UP:-45>e&&e>-135,DIRECTION_RIGHT:e>=-45&&45>=e};for(var n in r)if(r[n])return t[n];return null},getScale:function(t,e){return 2==t.length&&2==e.length?i.getDistance(e[0],e[1])/i.getDistance(t[0],t[1]):0},getRotation:function(t,e){return 2==t.length&&2==e.length?i.getAngle(e[1],e[0])-i.getAngle(t[1],t[0]):0}},a=t.Gesture={gestures:[],current:null,previous:null,startDetect:function(t,e){a.current||(a.current={inst:t,startEvent:i.extend({},e),lastEvent:e,gesture:!1},a.detect(e))},detect:function(t){if(a.current){var e=a.extendEventData(t);a.current.lastEvent=e;for(var r=0,n=a.gestures.length;n>r;r++){var i=a.gestures[r].handle(e.type,e,a.current.inst);if(i===!1){a.stop();break}}}},endDetect:function(t){a.detect(t),a.stop()},stop:function(){a.previous=i.extend({},a.current),a.current=null},extendEventData:function(t){var e=a.current.startEvent;return i.extend(t,{touchTime:t.time-e.time,distance:i.getDistance(e.center,t.center),distanceX:i.getSimpleDistance(e.center.pageX,t.center.pageX),distanceY:i.getSimpleDistance(e.center.pageY,t.center.pageY),direction:i.getDirection(i.getAngle(e.center,t.center)),scale:i.getScale(e.touches,t.touches),rotation:i.getRotation(e.touches,t.touches),start:e}),t},registerGesture:function(e){i.extend(t.defaults,e.defaults||{}),e.priority=e.priority||1e3,a.gestures.push(e),a.gestures.sort(function(t,e){return t.priority<e.priority?-1:t.priority>e.priority?1:0})}},o=t.Gestures={};return o.Hold={priority:10,defaults:{hold_timeout:500},timer:null,handle:function(e,r,n){switch(e){case t.TOUCH_START:clearTimeout(o.Hold.timer),a.current.gesture="hold",o.Hold.timer=setTimeout(function(){"hold"==a.current.gesture&&n.trigger("hold",r)},n.options.hold_timeout);break;case t.TOUCH_MOVE:case t.TOUCH_END:clearTimeout(o.Hold.timer)}}},a.registerGesture(o.Hold),o.Tap={priority:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,doubletap_distance:20,doubletap_interval:300},handle:function(e,r,n){switch(e){case t.TOUCH_END:if(r.touchTime>n.options.tap_max_touchtime||r.distance>n.options.tap_max_distance)return;a.current.gesture=a.previous&&"tap"==a.previous.gesture&&r.time-a.previous.lastEvent.time<n.options.doubletap_interval&&r.distance<n.options.doubletap_distance?"doubletap":"tap",n.trigger(a.current.gesture,r)}}},a.registerGesture(o.Tap),o.Drag={priority:50,defaults:{drag_min_distance:10},handle:function(e,r,n){var i="drag";switch(e){case t.TOUCH_MOVE:if(r.distance<n.options.drag_min_distance&&a.current.gesture!=i)return;a.current.gesture!=i&&n.trigger("dragstart",r),a.current.gesture=i,n.trigger(i,r),n.trigger(i+r.direction,r),r.originalEvent.preventDefault();break;case t.TOUCH_END:a.current.gesture==i&&(n.trigger("dragend",r),r.originalEvent.preventDefault())}}},a.registerGesture(o.Drag),o.Swipe={priority:51,defaults:{swipe_min_time:150,swipe_min_distance:20},handle:function(e,r,n){var i="swipe";switch(e){case t.TOUCH_END:"drag"==a.current.gesture&&r.touchTime>n.options.swipe_min_time&&r.distance>n.options.swipe_min_distance&&(n.trigger(i,r),n.trigger(i+r.direction,r))}}},a.registerGesture(o.Swipe),o.Transform={priority:45,defaults:{transform_min_scale:.1,transform_min_rotation:15},handle:function(e,r,n){var i="transform";switch(e){case t.TOUCH_MOVE:if((r.scale<n.options.transform_min_scale||r.rotation<n.options.transform_min_rotate)&&a.current.gesture!=i)return;return a.current.gesture!=i&&n.trigger("transformstart",r),a.current.gesture=i,n.trigger(i,r),Math.abs(r.rotate)>n.options.transform_min_rotate&&(n.trigger("rotate",r),n.trigger("rotate"+r.direction,r)),Math.abs(r.scale)>n.options.transform_min_scale&&(n.trigger("pinch",r),n.trigger("in",r)),r.originalEvent.preventDefault(),!1;case t.TOUCH_END:a.current.gesture==i&&(n.trigger("transformend",r),r.originalEvent.preventDefault())}}},a.registerGesture(o.Transform),o.Release={priority:999,handle:function(e,r,n){switch(e){case t.TOUCH_END:n.trigger("release",r)}}},a.registerGesture(o.Release),t}();