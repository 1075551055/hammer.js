/*! Hammer.JS - v1.0.0 - 2013-01-24
 * http://eightmedia.github.com/hammer.js
 *
 * Copyright (c) 2013 Jorik Tangelder <jorik@eight.nl>;
 * Licensed under the MIT license */

(function(e){"use strict";function t(){r.READY||(r.event.onTouch(e,r.TOUCH_MOVE,r.gesture.detect),r.event.onTouch(e,r.TOUCH_END,r.gesture.endDetect),r.READY=!0)}var r=function(e,t){return new r.Instance(e,t||{})};r.defaults={},r.HAS_TOUCHEVENTS="ontouchstart"in e,r.DIRECTION_DOWN="down",r.DIRECTION_LEFT="left",r.DIRECTION_UP="up",r.DIRECTION_RIGHT="right",r.TOUCH_START="start",r.TOUCH_MOVE="move",r.TOUCH_END="end",r.READY=!1,r.Instance=function(e,n){var i=this;return this.element=e,this.options=r.util.extend(r.defaults,n||{}),t(),r.event.onTouch(e,r.TOUCH_START,function(e){r.gesture.startDetect(i,e)}),this},r.Instance.prototype={trigger:function(e,t){return t.gesture=e,r.event.trigger(this.element,e,t)},on:function(e,t){return r.event.on(this.element,e,t)},off:function(e,t){return r.event.off(this.element,e,t)}},r.event={on:function(e,t,r){t=t.split(" ");for(var n=0;t.length>n;n++)e.addEventListener(t[n],r,!1)},off:function(e,t,r){t=t.split(" ");for(var n=0;t.length>n;n++)e.removeEventListener(t[n],r,!1)},trigger:function(e,t,r){var n=document.createEvent("Event");n.initEvent(t,!0,!0),n.hammer=r,e.dispatchEvent(n)},onTouch:function(e,t,n){var i=function(i){n.call(this,r.event.collectEventData(e,t,i))},s={};s[r.TOUCH_START]=r.HAS_TOUCHEVENTS?"touchstart":"mousedown",s[r.TOUCH_MOVE]=r.HAS_TOUCHEVENTS?"touchmove":"mousemove",s[r.TOUCH_END]=r.HAS_TOUCHEVENTS?"touchend touchcancel":"mouseup",r.HAS_TOUCHEVENTS?r.event.on(e,s[t],i):r.event.on(e,s[t],function(e){1===e.which&&i.apply(this,arguments)})},collectEventData:function(e,t,n){var i=n.touches;return i||(i=[{identifier:1,clientX:n.clientX,clientY:n.clientY,pageX:n.pageX,pageY:n.pageY,target:n.target}]),{type:t,time:Date.now(),target:n.target,touches:i,originalEvent:n,center:r.util.getCenter(i)}}},r.util={extend:function(e,t){for(var r in t)e[r]=t[r];return e},getCenter:function(e){return e[0]},getSimpleDistance:function(e,t){return Math.abs(t-e)},getAngle:function(e,t){var r=t.pageY-e.pageY,n=t.pageX-e.pageX;return 180*Math.atan2(r,n)/Math.PI},getDistance:function(e,t){var r=t.pageX-e.pageX,n=t.pageY-e.pageY;return Math.sqrt(r*r+n*n)},getDirection:function(e){var t={DIRECTION_DOWN:e>=45&&135>e,DIRECTION_LEFT:e>=135||-135>=e,DIRECTION_UP:-45>e&&e>-135,DIRECTION_RIGHT:e>=-45&&45>=e};for(var n in t)if(t[n])return r[n];return null},getScale:function(e,t){return 2==e.length&&2==t.length?r.util.getDistance(t[0],t[1])/r.util.getDistance(e[0],e[1]):0},getRotation:function(e,t){return 2==e.length&&2==t.length?r.util.getAngle(t[1],t[0])-r.util.getAngle(e[1],e[0]):0}},r.gesture={handlers:[],current:null,previous:null,startDetect:function(e,t){r.gesture.current||(r.gesture.current={inst:e,startEvent:r.util.extend({},t),lastEvent:t,name:!1},r.gesture.detect(t))},detect:function(e){if(r.gesture.current){var t=r.gesture.extendEventData(e);r.gesture.current.lastEvent=t;for(var n=0,i=r.gesture.handlers.length;i>n;n++){var s=r.gesture.handlers[n](t.type,t,r.gesture.current.inst);if(s===!1){r.gesture.stop();break}}}},endDetect:function(e){r.gesture.detect(e),r.gesture.stop()},stop:function(){r.gesture.previous=r.util.extend({},r.gesture.current),r.gesture.current=null},extendEventData:function(e){var t=r.gesture.current.startEvent;return r.util.extend(e,{touchTime:e.time-t.time,distance:r.util.getDistance(t.center,e.center),distanceX:r.util.getSimpleDistance(t.center.pageX,e.center.pageX),distanceY:r.util.getSimpleDistance(t.center.pageY,e.center.pageY),direction:r.util.getDirection(r.util.getAngle(t.center,e.center)),scale:r.util.getScale(t.touches,e.touches),rotation:r.util.getRotation(t.touches,e.touches),start:t}),e},registerGesture:function(e){r.util.extend(r.defaults,e.defaults||{}),e.priority=e.priority||1e3,r.gesture.handlers.push(e.handle),r.gesture.handlers.sort(function(e,t){return e.priority<t.priority?-1:e.priority>t.priority?1:0})}},r.gestures={},r.gestures.Hold={priority:10,defaults:{hold_timeout:500},timer:null,handle:function(e,t,n){switch(e){case r.TOUCH_START:clearTimeout(r.gestures.Hold.timer),r.gesture.current.name="hold",r.gestures.Hold.timer=setTimeout(function(){"hold"==r.gesture.current.name&&n.trigger("hold",t)},n.options.hold_timeout);break;case r.TOUCH_MOVE:case r.TOUCH_END:clearTimeout(r.gestures.Hold.timer)}}},r.gesture.registerGesture(r.gestures.Hold),r.gestures.Tap={priority:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,doubletap_distance:20,doubletap_interval:300},handle:function(e,t,n){if(e==r.TOUCH_END){if(t.touchTime>n.options.tap_max_touchtime||t.distance>n.options.tap_max_distance)return;r.gesture.current.name=r.gesture.previous&&"tap"==r.gesture.previous.gesture&&t.time-r.gesture.previous.lastHammer.event.time<n.options.doubletap_interval&&t.distance<n.options.doubletap_distance?"doubletap":"tap",n.trigger(r.gesture.current.name,t)}}},r.gesture.registerGesture(r.gestures.Tap),r.gestures.Drag={priority:50,defaults:{drag_min_distance:10},handle:function(e,t,n){var i="drag";switch(e){case r.TOUCH_MOVE:if(t.distance<n.options.drag_min_distance&&r.gesture.current.name!=i)return;r.gesture.current.name!=i&&n.trigger("dragstart",t),r.gesture.current.name=i,n.trigger(i,t),n.trigger(i+t.direction,t),t.originalEvent.preventDefault();break;case r.TOUCH_END:r.gesture.current.name==i&&(n.trigger("dragend",t),t.originalEvent.preventDefault())}}},r.gesture.registerGesture(r.gestures.Drag),r.gestures.Swipe={priority:51,defaults:{swipe_min_time:150,swipe_min_distance:20},handle:function(e,t,n){var i="swipe";e==r.TOUCH_END&&"drag"==r.gesture.current.name&&t.touchTime>n.options.swipe_min_time&&t.distance>n.options.swipe_min_distance&&(n.trigger(i,t),n.trigger(i+t.direction,t))}},r.gesture.registerGesture(r.gestures.Swipe),r.gestures.Transform={priority:45,defaults:{transform_min_scale:.1,transform_min_rotation:15},handle:function(e,t,n){var i="transform";switch(e){case r.TOUCH_MOVE:if((t.scale<n.options.transform_min_scale||t.rotation<n.options.transform_min_rotate)&&r.gesture.current.name!=i)return;return r.gesture.current.name!=i&&n.trigger("transformstart",t),r.gesture.current.name=i,n.trigger(i,t),Math.abs(t.rotate)>n.options.transform_min_rotate&&(n.trigger("rotate",t),n.trigger("rotate"+t.direction,t)),Math.abs(t.scale)>n.options.transform_min_scale&&(n.trigger("pinch",t),n.trigger("in",t)),t.originalEvent.preventDefault(),!1;case r.TOUCH_END:r.gesture.current.name==i&&(n.trigger("transformend",t),t.originalEvent.preventDefault())}}},r.gesture.registerGesture(r.gestures.Transform),r.gestures.Release={priority:999,handle:function(e,t,n){e==r.TOUCH_END&&n.trigger("release",t)}},r.gesture.registerGesture(r.gestures.Release),e.Hammer=r})(window);